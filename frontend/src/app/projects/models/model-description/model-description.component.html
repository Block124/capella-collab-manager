<!--
 ~ SPDX-FileCopyrightText: Copyright DB Netz AG and the capella-collab-manager contributors
 ~ SPDX-License-Identifier: Apache-2.0
 -->

<div class="wrapper flex-center">
  <mat-card *ngIf="modelService.model" class="section-card">
    <mat-card-title>{{ modelService.model.name }}</mat-card-title>
    <form (submit)="onSubmit()" [formGroup]="form">
      <fieldset>
        <mat-form-field>
          <mat-label>Description</mat-label>
          <textarea
            formControlName="description"
            matInput
            rows="3"
            style="resize: none"
          ></textarea>
        </mat-form-field>
      </fieldset>
      <fieldset>
        <mat-form-field appearance="fill">
          <mat-label>Version</mat-label>
          <mat-select formControlName="version" id="version-selector">
            <mat-option
              *ngFor="let version of this.toolVersions"
              [value]="version.id"
            >
              {{ version.name }}
              <span *ngIf="version.is_recommended"> (recommended)</span>
              <span *ngIf="version.is_deprecated"> (deprecated)</span>
            </mat-option>
          </mat-select>
        </mat-form-field>
      </fieldset>
      <fieldset>
        <mat-form-field appearance="fill">
          <mat-label>Model nature</mat-label>
          <mat-select formControlName="nature">
            <mat-option
              *ngFor="let nature of this.toolNatures"
              [value]="nature.id"
            >
              {{ nature.name }}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </fieldset>
      <br />
      <div class="flex-space-between">
        <a mat-button [routerLink]="'../../..'"
          ><mat-icon>arrow_back</mat-icon>Back</a
        >
        <div>
          <button
            mat-flat-button
            color="warn"
            (click)="deleteModel()"
            *ngIf="canDelete"
          >
            Delete
          </button>
          <button mat-flat-button color="primary" type="submit">
            Update model
          </button>
        </div>
      </div>
    </form>
  </mat-card>
</div>
