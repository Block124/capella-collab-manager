
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.5.10">
    
    
      
        <title>Testing - Capella Collaboration development documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.472b142f.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.08040f6c.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="None" data-md-color-accent="None">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#frontend-testing" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Capella Collaboration development documentation" class="md-header__button md-logo" aria-label="Capella Collaboration development documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Capella Collaboration development documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Testing
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Capella Collaboration development documentation" class="md-nav__button md-logo" aria-label="Capella Collaboration development documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Capella Collaboration development documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Backend
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Backend" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Backend
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../backend/technology/" class="md-nav__link">
        Technology overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../backend/extensions/" class="md-nav__link">
        Extension modules
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../backend/exception/" class="md-nav__link">
        Exception handling
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Frontend
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Frontend" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Frontend
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../routes/" class="md-nav__link">
        Routes
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Testing
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Testing
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#unit-integration-testing" class="md-nav__link">
    Unit &amp; Integration testing
  </a>
  
    <nav class="md-nav" aria-label="Unit &amp; Integration testing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#technologies" class="md-nav__link">
    Technologies
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#additional-sources" class="md-nav__link">
    Additional sources
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#general" class="md-nav__link">
    General
  </a>
  
    <nav class="md-nav" aria-label="General">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#robust-component-tests" class="md-nav__link">
    Robust component tests
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#element-helper-functions" class="md-nav__link">
    Element helper functions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#executing-tests" class="md-nav__link">
    Executing tests
  </a>
  
    <nav class="md-nav" aria-label="Executing tests">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#output" class="md-nav__link">
    Output
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#end-to-end-testing" class="md-nav__link">
    End-to-End testing
  </a>
  
    <nav class="md-nav" aria-label="End-to-End testing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#technologies_1" class="md-nav__link">
    Technologies
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-generation" class="md-nav__link">
    Test generation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#executing-tests_1" class="md-nav__link">
    Executing tests
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#unit-integration-testing" class="md-nav__link">
    Unit &amp; Integration testing
  </a>
  
    <nav class="md-nav" aria-label="Unit &amp; Integration testing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#technologies" class="md-nav__link">
    Technologies
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#additional-sources" class="md-nav__link">
    Additional sources
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#general" class="md-nav__link">
    General
  </a>
  
    <nav class="md-nav" aria-label="General">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#robust-component-tests" class="md-nav__link">
    Robust component tests
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#element-helper-functions" class="md-nav__link">
    Element helper functions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#executing-tests" class="md-nav__link">
    Executing tests
  </a>
  
    <nav class="md-nav" aria-label="Executing tests">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#output" class="md-nav__link">
    Output
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#end-to-end-testing" class="md-nav__link">
    End-to-End testing
  </a>
  
    <nav class="md-nav" aria-label="End-to-End testing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#technologies_1" class="md-nav__link">
    Technologies
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-generation" class="md-nav__link">
    Test generation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#executing-tests_1" class="md-nav__link">
    Executing tests
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<!--
 ~ SPDX-FileCopyrightText: Copyright DB Netz AG and the capella-collab-manager contributors
 ~ SPDX-License-Identifier: Apache-2.0
 -->

<h1 id="frontend-testing">Frontend Testing</h1>
<h2 id="unit-integration-testing">Unit &amp; Integration testing</h2>
<h3 id="technologies">Technologies</h3>
<ul>
<li>We use <a href="https://jasmine.github.io">Jasmine</a> as testing framework</li>
<li><a href="https://karma-runner.github.io">Karma</a> is used as test runner</li>
<li>We use <a href="https://istanbul.js.org/">istanbul</a> to measure and visualize the code coverage</li>
</ul>
<h3 id="additional-sources">Additional sources</h3>
<ul>
<li><a href="https://angular.io/guide/testing">Official angular testing guide</a></li>
<li>Recommended: <a href="https://testing-angular.com/">Detailed angular testing guide</a></li>
</ul>
<h3 id="general">General</h3>
<h4 id="robust-component-tests">Robust component tests</h4>
<p>When testing components, we must query the elements needed for the test.
To ensure that even if the element type or attributes changes, the element
can still be queried, we assign a <code>data-testId</code> to each needed element.
This not only increases robustness, but also makes it very easy
to query elements. The value assigned to the test id should clearly describe
the usage of the element and should not be too long.
For example, one can use the schema <code>data-testId=&lt;type&gt;-&lt;description&gt;</code>
where the prefix usually describes the general contex (e.g., whether it is
an input, button, textfield, etc.) and the following description specifies the
usage of it (e.g., createProject).</p>
<h4 id="element-helper-functions">Element helper functions</h4>
<p>Usually testing components consists of querying elements, applying changes
to them, triggering events on them, and then comparing the results with the
expected results. To reduce repetition and increase readability, one should
use existing helper functions or create new ones if none exist.</p>
<h3 id="executing-tests">Executing tests</h3>
<p>To execute the integration tests, one needs to run <code>make test</code>. However, in some
cases it is not possible to correctly set the <code>CHROME_BIN</code> that is needed to generate
the test output inside the browser. If this is the case, one should either set
the <code>CHORME_BIN</code> in the make file or simply run <code>EXPORT CHROME_BIN=&lt;path&gt;</code>
followed by <code>ng test</code>. Beyond that, it is not necessary to run anything else
(e.g., the backend) for test execution.</p>
<h4 id="output">Output</h4>
<p>The resulting output in the browser considers three different cases:</p>
<ol>
<li>Green tests are <em>successful</em> tests</li>
<li>Yellow tests (marked with a ☆) are <em>deactivated</em> tests</li>
<li>Red tests are <em>failed</em> tests</li>
</ol>
<p>The general code coverage statistics (i.e. statement, branch, function,
and line coverage) are output to the console. To also see what exactly is
covered and what is missing, one can open the <code>index.html</code> file in the
<code>/frontend/test-results/istanbul-coverage</code> folder.</p>
<h2 id="end-to-end-testing">End-to-End testing</h2>
<h3 id="technologies_1">Technologies</h3>
<ul>
<li>We use <a href="https://playwright.dev">playwright</a> for E2E testing</li>
</ul>
<h3 id="test-generation">Test generation</h3>
<p>Playwright supports the generation of E2E tests by interacting
with the frontend and recording each action and input. This can be started
by executing <code>npx playwright codegen localhost:4200</code> but needs a running
frontend and backend to work.</p>
<p>Test generation can significantly speed up test creation, but in general
one should only use the resulting test as a base and adjust it accordingly.
For example, check selectors and adjust them to make them more robust,
or add more expectations as needed.</p>
<h3 id="executing-tests_1">Executing tests</h3>
<p>To run the E2E tests, one must first make sure that a backend is running.
If that is the case, one can run <code>npx playwright test</code> to start
the tests. In case of an error the browser will be directly opened and
show the last test report, otherwise one can open it with <code>npx playwright show-report</code>.
A very helpful option when running the tests is <code>--trace on</code>. This provides,
for example, a screenshot of the action and the before/after state (for each step),
contains a detailed log, and one can also view the console output and
network calls performed.</p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../routes/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Routes" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Routes
            </div>
          </div>
        </a>
      
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2022 DB Netz AG
    </div>
  
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.annotate"], "search": "../../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.d6c3db9e.min.js"></script>
      
    
  </body>
</html>